(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7512037e"],{"176a":function(t,e,n){"use strict";n("d81d"),n("d3b7");function a(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}e["a"]=function(t){var e=t.header,i=t.filterVal,o=t.list,r=t.filename,l=t.autoWidth,c=t.bookType;n.e("chunk-114a0750").then(n.bind(null,"4bf8")).then((function(t){var n=a(i,o);t.export_json_to_excel({header:e,data:n,filename:r||"excel",autoWidth:!1!==l&&l,bookType:c||"xlsx"})}))}},"27f3":function(t,e,n){},"4ed3":function(t,e,n){"use strict";var a=n("5646"),i=n.n(a);i.a},"4f1e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("a-tabs",{staticClass:"tab",attrs:{defaultActiveKey:"1"}},[n("a-tab-pane",{key:"1"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"team"}}),t._v(" 置业顾问 ")],1),n("homeConsultant")],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"search",staticStyle:{padding:"20px"}},[n("condition-filter",{attrs:{layout:t.conditionFilterInfo.layout,fields:t.conditionFilterInfo.fields,actions:t.conditionFilterInfo.actions},model:{value:t.conditionFilterInfo.params,callback:function(e){t.$set(t.conditionFilterInfo,"params",e)},expression:"conditionFilterInfo.params"}})],1),n("div",{staticClass:"space"}),n("div",{staticClass:"tableTop"},[n("div",{staticClass:"tableTop_rank"},[t._v("培训数据排名")]),n("a-button",{staticClass:"tableTop_btn",attrs:{type:"primary",icon:"download",load:t.downloadLoading},on:{click:t.exportExcel}},[t._v("导出排名数据")])],1),n("a-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{padding:"20px"},attrs:{bordered:""}},"a-table",t.tableInfo.attrs,!1),t.tableInfo.events))],1)},r=[],l=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2fa7")),c=n("176a");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={data:function(){var t=this;return{sorter:{},loading:!1,conditionFilterInfo:{layout:"block",params:{key:void 0,time:void 0},fields:[{label:"搜索",key:"key",value:"key",style:{width:"30%"},component:"a-input",attrs:{placeholder:"项目名/归属顾问",style:"width: 300px",options:[]}},{label:"上线时间",value:"time",key:"time",component:"a-range-picker",class:"time",style:{width:"30%"},attrs:{placeholder:["开始日期","结束日期"],style:"width: 300px;"}}],actions:[{component:"a-button",label:"查询",events:{click:function(){t.handleSearch()}},attrs:{type:"primary"}},{component:"a-button",label:"重置",events:{click:function(){t.handleReset()}},attrs:{}}]},tableInfo:{selects:[],attrs:{scroll:{x:2e3},columns:this.getTableColumns(),dataSource:[],customRow:function(t,e){return{style:{background:e%2===1?"rgba(247,248,252,1)":""}}},pagination:{total:0,current:1,pageSize:10,defaultCurrent:1,defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(t,e){return"总记录: ".concat(t)}},loading:!1},events:{change:function(e,n,a){t.tableInfo.attrs.pagination=e,t.sorter=a,t.getList()}}},downloadLoading:!1}},methods:{getTableColumns:function(){var t=this,e=this.$createElement,n=[{title:"项目名称",width:200,dataIndex:"projectName",align:"center"},{title:"上线时间",dataIndex:"onlineTime",width:150,align:"center",customRender:function(t,n,a){return e("span",null===t?["--"]:[t])}},{title:"归属销售",width:150,dataIndex:"realName",align:"center",customRender:function(t,n,a){return e("span",null===t?["--"]:[t])}},{title:"培训完成率",width:150,dataIndex:"completionRate",align:"center",sorter:function(t,e){return t.completion-e.completion},customRender:function(t,n,a){return e("span",[t,"%"])}},{title:"顾问总人数",width:150,dataIndex:"totalCount",align:"center"},{title:"完成培训人数",width:150,dataIndex:"trainCompletionCount",align:"center"},{title:"完成注册",width:150,dataIndex:"register",align:"center"},{title:"完成发名片",width:150,dataIndex:"sendCard",align:"center"},{title:"完成推楼盘",width:150,dataIndex:"recommendBuilding",align:"center"},{title:"完成线下拓客",width:150,dataIndex:"extendCustomer",align:"center"},{title:"完成推微沙盘",width:150,dataIndex:"recommendSandTable",align:"center"},{title:"完成推活动",width:150,dataIndex:"recommendActivity",align:"center"},{title:"完成推文章",width:150,dataIndex:"recommendArticle",align:"center"},{title:"操作",width:150,dataIndex:"operat",align:"center",fixed:"right",customRender:function(n,a,i){return e("span",{style:"color:#1890FF;cursor:pointer",on:{click:function(){t.checkDetail(a)}}},["查看详情"])}}];return n},getList:function(){var t=this,e=this.tableInfo.attrs,n={descend:1,ascend:2};this.loading=!0,this.$Api.getUserDataRanking(d({},this.params,{page:e.pagination.current,limit:e.pagination.pageSize,sortOrder:n[this.sorter.order]})).then((function(e){200===e.code?(t.tableInfo.attrs.pagination.current=e.data.current,t.tableInfo.attrs.pagination.total=e.data.total,t.tableInfo.attrs.dataSource=e.data.list,t.loading=!1):(t.$message.error(e.msg),t.loading=!1)})).catch((function(e){t.loading=!1}))},handleReset:function(){this.tableInfo.attrs.pagination.current=1,this.conditionFilterInfo.params={key:void 0,time:void 0},this.getList()},handleSearch:function(){this.getList()},exportExcel:function(){var t=this;this.downloadLoading=!0;var e={descend:1,ascend:2},n=["项目名称","上线时间","归属销售","培训完成率","顾问总人数","完成培训人数","完成注册","完成发名片","完成推楼盘","完成线下拓客","完成推微沙盘","完成推活动"],a=["projectName","onlineTime","realName","completionRate","totalCount","trainCompletionCount","register","sendCard","recommendBuilding","extendCustomer","recommendSandTable","recommendActivity"];this.$Api.getUserDataRanking(d({},this.params,{page:this.tableInfo.attrs.pagination.current,limit:999999,sortOrder:e[this.sorter.order]})).then((function(e){if(200===e.code){var i=e.data.list;Object(c["a"])({header:n,filterVal:a,list:i,filename:"培训数据排名"}),t.downloadLoading=!1}}))},checkDetail:function(t){this.$router.push("/basicDetail/".concat(t.projectCode))}},computed:{params:function(){var t=this.$utils.deepClone(this.conditionFilterInfo.params);if(t.time){var e=this.conditionFilterInfo.params.time[0].format("YYYY-MM-DD"),n=this.conditionFilterInfo.params.time[1].format("YYYY-MM-DD");t.beginTime=e,t.endTime=n,delete t.time}return t}},mounted:function(){this.getList()}},p=u,f=(n("4ed3"),n("2877")),m=Object(f["a"])(p,o,r,!1,null,"5188009f",null),h=m.exports,g={components:{homeConsultant:h},data:function(){return{}}},b=g,v=(n("a74b"),Object(f["a"])(b,a,i,!1,null,"707dfec5",null));e["default"]=v.exports},5646:function(t,e,n){},a74b:function(t,e,n){"use strict";var a=n("27f3"),i=n.n(a);i.a}}]);